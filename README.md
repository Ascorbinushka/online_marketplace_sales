# Анализ продаж крупного онлайн-маркетплейса
## Этапы проекта
#### 1. Написать скрипт, для сбора данных по API
#### 2. Настроить сервер и развернуть на нем базу данных для хранения информации
#### 3. Единоразово написать и запустить скрипт, который первично заполнит базу всеми историческими данными, которые уже доступны в API.
#### 4. Настроить скрипт, чтобы он ежедневно в 7 утра забирал данные за предыдущий день
#### 5. Установить Metabase, подключить его к базе и собрать дашборд для оперативного отслеживания основных метрик по активности клиентов, ассортиментной матрицы, продажам и так далее
#### 6. Дополнительно необходимо провести 2 полноценных исследования на основании данных за 2023 год, снабдить их кодов/графиками (при необходимости) и ответить на 2 вопроса:
  - Какие мои предложения относительно оптимизации ассортиментной матрицы, увеличения кол-ва продаж некоторых товаров, вывода их из ассортимента или увеличения их маржинальности? Это могут быть рекомендации относительно полного вывода из ассортимента, проведения каких-то конкретных акций и скидок, введения новых позиций в ассортимент - что угодно. Можно пользоваться любыми инструментами, считать любые методы и применять любые способы анализа, которые кажутся уместными.

  - Какие мои предложения относительно работы с клиентской базой? Как увеличить LTV? Какие метрики нужно увеличивать, стоит ли их увеличивать вообще и как их увеличивать, чтобы работать с существующей клиентской базой более эффективно?
## Запуск проекта
### Пример заполнения переменных окружения - [.env.example](.env.example)

### Развернуть бд с таблицами
```
make up-services
```
### Остановить контейнер с бд
```
make down-services
```
### Запуск скрипта, который единоразово заполнит базу историческими данными (с 2023-01-01 по настоящее время - 1 день)
```
make gener-data
```
### Развернуть Apache Airflow
```
make up-af
```
### Остановить контейнер с Apache Airflow
```
make down-af
```
### Развернуть Metabase
```
make up-mb
```
### Остановить контейнер с Metabase
```
make down-mb
```
### Структура базы данных о покупках 

## Таблица: `purchases`

**Описание столбцов:**

| Столбец                   | Описание                                                                                     |
| ------------------------- |----------------------------------------------------------------------------------------------|
| `purchase_id`            | Уникальный идентификатор для каждой покупки.                                                 |
| `client_id`              | Уникальный идентификатор клиента, совершившего покупку.                                      |
| `gender_id`              | Идентификатор гендера клиента (FK - genders).                                                |
| `purchase_datetime`      | Дата и время совершения покупки.                                                             |
| `purchase_time_as_seconds_from_midnight` | Время совершения покупки, выраженное в секундах от полуночи (00:00:00).                      |
| `product_id`             | Уникальный идентификатор продукта, который был приобретен.                                   |
| `quantity`               | Количество единиц продукта, приобретенных в рамках данной покупки.                           |
| `price_per_item`         | Цена за одну единицу продукта, до учета скидок.                                              |
| `discount_per_item`      | Сумма скидки, примененной к одной единице продукта.                                          |
| `total_price`            | Общая стоимость покупки, рассчитанная как `(price_per_item - discount_per_item) * quantity`. |

## Таблица: `genders`

**Описание столбцов:**

| Столбец                | Описание                                                                                    |
| ---------------------- |---------------------------------------------------------------------------------------------|
| `gender_id`           | Уникальный идентификатор гендера.                                                           |
| `gender`              | Гендер клиента, совершившего покупку. Возможные значения: `F` (Female), `M` (Male).        |
